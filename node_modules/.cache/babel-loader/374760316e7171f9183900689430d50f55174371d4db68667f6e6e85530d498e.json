{"ast":null,"code":"var _jsxFileName = \"D:\\\\studyHK5\\\\DoAn\\\\DoAnHK6-Nhom1\\\\react_client\\\\src\\\\Routes\\\\PrivateRoute.js\",\n  _s = $RefreshSig$();\nimport { jwtDecode } from \"jwt-decode\";\nimport { useEffect, useState } from \"react\";\nimport { Alert, Container } from \"react-bootstrap\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = props => {\n  _s();\n  const token = localStorage.getItem(\"token\");\n  const [role, setRole] = useState(\"\");\n\n  // Check token\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      const decoded = jwtDecode(token);\n      setRole(decoded[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"]);\n    }\n    console.log(\"check role\", role);\n  }, [role]);\n  if (token && role === \"Admin\") {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: props.children\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          className: \"mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n            children: \"Oh snap! You got an error!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You don't have premisson to acess this route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n};\n_s(PrivateRoute, \"ttrZ0iOMgbYFZQq9b9BWJ5hMm/4=\");\n_c = PrivateRoute;\nexport default PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["jwtDecode","useEffect","useState","Alert","Container","Fragment","_Fragment","jsxDEV","_jsxDEV","PrivateRoute","props","_s","token","localStorage","getItem","role","setRole","decoded","console","log","children","variant","className","Heading","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/studyHK5/DoAn/DoAnHK6-Nhom1/react_client/src/Routes/PrivateRoute.js"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Alert, Container } from \"react-bootstrap\";\r\n\r\nconst PrivateRoute = (props) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  const [role, setRole] = useState(\"\");\r\n\r\n  // Check token\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (token) {\r\n      const decoded = jwtDecode(token);\r\n      setRole(\r\n        decoded[\r\n            \"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"\r\n        ]\r\n      );\r\n\r\n    } \r\n    console.log(\"check role\", role);\r\n  }, [role]);\r\n\r\n  if (token && role === \"Admin\") {\r\n    return <>{props.children}</>;\r\n  } else {\r\n    return (\r\n      <>\r\n        <Container>\r\n          <Alert variant=\"danger\" className=\"mt-3\">\r\n            <Alert.Heading>Oh snap! You got an error!</Alert.Heading>\r\n            <p>You don't have premisson to acess this route</p>\r\n          </Alert>\r\n        </Container>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default PrivateRoute;\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,YAAY;AACtC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,KAAK,EAAEC,SAAS,QAAQ,iBAAiB;AAAC,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,YAAY,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC9B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;;EAEpC;EACAD,SAAS,CAAC,MAAM;IACd,MAAMW,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAIF,KAAK,EAAE;MACT,MAAMK,OAAO,GAAGjB,SAAS,CAACY,KAAK,CAAC;MAChCI,OAAO,CACLC,OAAO,CACH,8DAA8D,CAEpE,CAAC;IAEH;IACAC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEJ,IAAI,CAAC;EACjC,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,IAAIH,KAAK,IAAIG,IAAI,KAAK,OAAO,EAAE;IAC7B,oBAAOP,OAAA,CAAAF,SAAA;MAAAc,QAAA,EAAGV,KAAK,CAACU;IAAQ,gBAAG,CAAC;EAC9B,CAAC,MAAM;IACL,oBACEZ,OAAA,CAAAF,SAAA;MAAAc,QAAA,eACEZ,OAAA,CAACJ,SAAS;QAAAgB,QAAA,eACRZ,OAAA,CAACL,KAAK;UAACkB,OAAO,EAAC,QAAQ;UAACC,SAAS,EAAC,MAAM;UAAAF,QAAA,gBACtCZ,OAAA,CAACL,KAAK,CAACoB,OAAO;YAAAH,QAAA,EAAC;UAA0B;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAe,CAAC,eACzDnB,OAAA;YAAAY,QAAA,EAAG;UAA4C;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC;IAAC,gBACZ,CAAC;EAEP;AACF,CAAC;AAAChB,EAAA,CAlCIF,YAAY;AAAAmB,EAAA,GAAZnB,YAAY;AAoClB,eAAeA,YAAY;AAAC,IAAAmB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}